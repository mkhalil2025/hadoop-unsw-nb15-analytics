# Environment Configuration for Hadoop UNSW-NB15 Analytics
# Memory optimized for student laptops (8-16GB RAM)

# Hadoop Configuration
HADOOP_CONF_DIR=/etc/hadoop
HADOOP_LOG_DIR=/opt/hadoop-3.2.1/logs
HADOOP_HOME=/opt/hadoop-3.2.1
JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64

# Memory settings optimized for student laptops
# Namenode settings (reduced memory footprint)
HADOOP_NAMENODE_OPTS="-Xmx1024m -Xms512m"
HADOOP_DATANODE_OPTS="-Xmx512m -Xms256m"

# YARN ResourceManager settings (memory optimized)
YARN_RESOURCEMANAGER_HEAPSIZE=1024
YARN_NODEMANAGER_HEAPSIZE=1024

# YARN Resource allocation (conservative for student laptops)
YARN_NODEMANAGER_RESOURCE_MEMORY_MB=4096
YARN_SCHEDULER_MAXIMUM_ALLOCATION_MB=4096
YARN_SCHEDULER_MINIMUM_ALLOCATION_MB=512
YARN_NODEMANAGER_RESOURCE_CPU_VCORES=2

# Hive Configuration
HIVE_HOME=/opt/hive
HIVE_CONF_DIR=/opt/hive/conf

# Hive memory settings
HIVE_METASTORE_HEAPSIZE=512m
HIVE_SERVER2_HEAPSIZE=1024m

# PostgreSQL Metastore settings
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=metastore
POSTGRES_USER=hive
POSTGRES_PASSWORD=hive123

# Cluster settings
CLUSTER_NAME=hadoop-cluster
CORE_CONF_fs_defaultFS=hdfs://namenode:8020
HDFS_CONF_dfs_namenode_name_dir=file:///opt/hadoop/data/namenode
HDFS_CONF_dfs_datanode_data_dir=file:///opt/hadoop/data/datanode
HDFS_CONF_dfs_replication=1

# YARN settings
YARN_CONF_yarn_resourcemanager_hostname=resourcemanager
YARN_CONF_yarn_nodemanager_aux_services=mapreduce_shuffle
YARN_CONF_yarn_nodemanager_resource_memory_mb=4096
YARN_CONF_yarn_scheduler_maximum_allocation_mb=4096
YARN_CONF_yarn_scheduler_minimum_allocation_mb=512
YARN_CONF_yarn_nodemanager_resource_cpu_vcores=2

# MapReduce settings (memory optimized)
MAPRED_CONF_mapreduce_framework_name=yarn
MAPRED_CONF_mapreduce_map_memory_mb=1024
MAPRED_CONF_mapreduce_reduce_memory_mb=2048
MAPRED_CONF_mapreduce_map_java_opts=-Xmx768m
MAPRED_CONF_mapreduce_reduce_java_opts=-Xmx1536m

# Security settings (disabled for development)
HDFS_CONF_dfs_permissions_enabled=false
HDFS_CONF_dfs_webhdfs_enabled=true

# Performance tuning for small datasets
HDFS_CONF_dfs_block_size=67108864
HDFS_CONF_dfs_client_block_write_replace_datanode_on_failure_policy=NEVER